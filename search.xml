<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>APP技术设计小结</title>
    <url>/2021/11/13/6f9d8fb36a4e/</url>
    <content><![CDATA[<p>近期做APP的技术方案，需要和WEB端协同上线，踩了一些坑。记录如下</p>
<h2 id="沟通"><a href="#沟通" class="headerlink" title="沟通"></a>沟通</h2><ul>
<li><p>背景沟通：项目启动拉通各业务线产品、开发，介绍大家认识；讲解项目背景；达成一致的远景。</p>
</li>
<li><p>面对面沟通：对技术方案过程中，有条件就面对面，没有条件也尽量语音沟通，效率会更高</p>
</li>
<li><p>沟通结果输出：沟通后，通过书面输出沟通结果，并确认。</p>
</li>
<li><p>二次确认沟通：实际进入开发后，己方开发提出的许多疑问，统一和对方开发面对面沟通，以降低打扰和提高效率。</p>
</li>
<li><p>输出结果质量看护：输出UML流程和泳道图，有利于识别不清晰的内容；使用填表格的方式确保没有遗漏项</p>
</li>
</ul>
<h2 id="技术方案设计"><a href="#技术方案设计" class="headerlink" title="技术方案设计"></a>技术方案设计</h2><ul>
<li><p>APP新老兼容问题：老APP访问新服务，是否会有问题，如何解决。（期间有个三级线上问题）</p>
</li>
<li><p>细节实现决定能否支撑业务： 对接业务流程接口，不仅要确保流程能否走通，也要看接口的细节，入参、出参是否满足业务流程。（踩过坑）</p>
</li>
</ul>
]]></content>
      <tags>
        <tag>总结</tag>
      </tags>
  </entry>
  <entry>
    <title>Hexo配置</title>
    <url>/2021/11/11/ec566c05276b/</url>
    <content><![CDATA[<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><ol>
<li>Hexo是一个Node应用，Hexo通过Node的各种库，将.md文件生成静态网站。</li>
<li>gitHub支持静态文件页面展示，因此Hexo生成的静态文件可以直接放到github中</li>
<li>Next是Hexo的一个主题，有丰富的功能可配置。</li>
</ol>
<h2 id="本地生效，服务器不生效"><a href="#本地生效，服务器不生效" class="headerlink" title="本地生效，服务器不生效"></a>本地生效，服务器不生效</h2><p>需要先清空、生成新的静态文件、再部署</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo cl</span><br><span class="line">hexo gen</span><br><span class="line">hexo dep</span><br></pre></td></tr></table></figure>

<h2 id="主题-Next"><a href="#主题-Next" class="headerlink" title="主题 Next"></a>主题 Next</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone https://github.com/theme-next/hexo-theme-next themes/next</span><br></pre></td></tr></table></figure>

<p>./_config.yml</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">theme: landscape</span><br></pre></td></tr></table></figure>



<h2 id="常用配置"><a href="#常用配置" class="headerlink" title="常用配置"></a>常用配置</h2><p>搜索库支持、置顶支持</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-searchdb --save</span><br><span class="line"></span><br><span class="line">npm uninstall hexo-generator-index --save</span><br><span class="line">npm install hexo-generator-index-pin-top --save</span><br></pre></td></tr></table></figure>

<h3 id="搜索库"><a href="#搜索库" class="headerlink" title="搜索库"></a>搜索库</h3><p>./_config.yml</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">search:</span><br><span class="line">  path: search.xml</span><br><span class="line">  field: post</span><br><span class="line">  format: html</span><br><span class="line">  limit: 10000</span><br></pre></td></tr></table></figure>

<p>./themes/next/_config.yml</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">local_search:</span><br><span class="line">    enable: true</span><br></pre></td></tr></table></figure>

<h3 id="置顶"><a href="#置顶" class="headerlink" title="置顶"></a>置顶</h3><p>./source/post/xx.md</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">top: 1 // 数字越大越靠前</span><br></pre></td></tr></table></figure>

<h3 id="文件中文名字问题"><a href="#文件中文名字问题" class="headerlink" title="文件中文名字问题"></a>文件中文名字问题</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">permalink: :year/:month/:day/:title/ </span><br><span class="line">改成--&gt;</span><br><span class="line">permalink: :year/:month/:day/:hash/</span><br></pre></td></tr></table></figure>

<h3 id="添加-tags和-categorys"><a href="#添加-tags和-categorys" class="headerlink" title="添加 tags和 categorys"></a>添加 <code>tags</code>和 <code>categorys</code></h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo new page tags</span><br><span class="line">hexo new page categorys</span><br></pre></td></tr></table></figure>

<p>修改文件</p>
<img src="image-20210515233922673.png" alt="image-20210515233922673" style="zoom:67%;" />

<h3 id="添加图片"><a href="#添加图片" class="headerlink" title="添加图片"></a>添加图片</h3><p>使用 typora 插入图片，并设置路径如下</p>
<p><img src="image-20210515234102349.png" alt="image-20210515234102349"></p>
<p>写完后，将『当前文件名/』 删除即可完成图片添加。 </p>
]]></content>
      <tags>
        <tag>工具</tag>
      </tags>
  </entry>
  <entry>
    <title>手机CPU天梯图</title>
    <url>/2021/11/12/07d5f8c6c794/</url>
    <content><![CDATA[<p>近期有换手机需求，仅供参考。</p>
<hr>
<table>
<thead>
<tr>
<th>手机</th>
<th>优点</th>
<th>缺点</th>
</tr>
</thead>
<tbody><tr>
<td>iPhone</td>
<td>流畅；可做测试机</td>
<td>杀后台；续航差</td>
</tr>
<tr>
<td>android</td>
<td>续航好；价格便宜；存储卡；选择多</td>
<td>安全、卡顿已经渐渐补足</td>
</tr>
</tbody></table>
<hr>
<table>
<thead>
<tr>
<th>CPU</th>
<th>代表手机和价位(2021.09.19)</th>
</tr>
</thead>
<tbody><tr>
<td>A14</td>
<td>iphone12</td>
</tr>
<tr>
<td>骁龙888 Plus</td>
<td></td>
</tr>
<tr>
<td>骁龙888    麒麟9000</td>
<td>OnePlus9(4k)   Redmi K40P 8+256(3k) 小米11(3.8k) 中兴Axon30Pro(2.5K) realmeGT(2.9K)</td>
</tr>
<tr>
<td>麒颜9000E</td>
<td></td>
</tr>
<tr>
<td>A13</td>
<td>iphone11 (4.4k) SE2</td>
</tr>
<tr>
<td>骁龙870</td>
<td>redmiK40(2k) realme(2k) vivoNev5(2.2k) 小米10S(3.1k)</td>
</tr>
<tr>
<td>Exynos 1080</td>
<td></td>
</tr>
<tr>
<td>骁龙865 Plus</td>
<td>oneplus(2.4k) 联想拯救者(2.7k)</td>
</tr>
<tr>
<td>天玑1200</td>
<td>realmeGT(2k) redmiK40(2k)</td>
</tr>
<tr>
<td>骁龙865</td>
<td></td>
</tr>
<tr>
<td>天玑1100    Exynos 990</td>
<td>redmi note10P    (1.6)</td>
</tr>
<tr>
<td>骁龙860    天玑1000+</td>
<td>小米10(2.8k)</td>
</tr>
<tr>
<td>骁龙780G    骁龙855 Plus</td>
<td></td>
</tr>
<tr>
<td>麒麟9905G</td>
<td></td>
</tr>
<tr>
<td>A12</td>
<td>iPhoneXR(3.6k) XS</td>
</tr>
<tr>
<td>麒麟990    Exynos 9825</td>
<td></td>
</tr>
<tr>
<td>骁龙778G    骁龙855    Exynos 9820</td>
<td></td>
</tr>
<tr>
<td>天玑1000L</td>
<td></td>
</tr>
<tr>
<td>骁龙845</td>
<td></td>
</tr>
<tr>
<td>A11</td>
<td>iPhone 8 iPhoneX</td>
</tr>
<tr>
<td>骁龙768G    天玑820    麒麟985</td>
<td></td>
</tr>
<tr>
<td>天玑800</td>
<td></td>
</tr>
<tr>
<td>骁龙765/765G    天玑800U</td>
<td></td>
</tr>
<tr>
<td>骁龙750G    麒麟820</td>
<td></td>
</tr>
<tr>
<td>麒麟980    Exynos 9810</td>
<td></td>
</tr>
<tr>
<td>(MSM8998)    骁龙835    天玑720    麒810</td>
<td></td>
</tr>
<tr>
<td>A10</td>
<td>iPhone 7</td>
</tr>
</tbody></table>
]]></content>
      <tags>
        <tag>硬件</tag>
      </tags>
  </entry>
  <entry>
    <title>精准曝光组件介绍</title>
    <url>/2021/11/14/cb7376238656/</url>
    <content><![CDATA[<p>近期有个需求，当一个组件在可视区中间80%范围内出现3S，即上传曝光。组件移出页面再已入，需要再次按规则曝光。</p>
<h2 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h2><ol>
<li>因为tableview 和 scrollview 有复用机制，需要考虑曝光对象维护问题，为防止乱，用数据 id作为唯一标识。</li>
<li>手机资源紧缺，需要共用一个计时器</li>
<li>为了效率问题，需要在多线程上执行曝光逻辑</li>
</ol>
<h2 id="方案"><a href="#方案" class="headerlink" title="方案"></a>方案</h2><ol>
<li>使用基础的数组和字典，存储唯一数据id和曝光时间</li>
<li>使用累积的方式计算曝光时间</li>
<li>使用全局唯一定时器触发更新曝光时间</li>
<li>使用多个线程用于计算、曝光、移除、增加曝光时间。另起一个线程调度多线程计算</li>
</ol>
<h3 id="数据结构"><a href="#数据结构" class="headerlink" title="数据结构"></a>数据结构</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;page_name&quot;: &#123;</span><br><span class="line">    &quot;component_name1&quot;: &#123;</span><br><span class="line">      &quot;data_id1&quot;: &#123;</span><br><span class="line">        &quot;view&quot;: &quot;组件引用地址——弱引用&quot;,</span><br><span class="line">        &quot;time&quot;: 0</span><br><span class="line">      &#125;</span><br><span class="line">      ...</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>每次由组件触发加载数据，则找到page_name, 再找到component_name, 生成一个data_id1: object的节点。</p>
<p>如果在屏幕上，则设置time为0；如果组件不在屏幕上，则直接把时间设置为10s</p>
<h3 id="调度"><a href="#调度" class="headerlink" title="调度"></a>调度</h3><p>创建常驻Timer，用于调度定时器</p>
<p>在多线程上执行操作曝光逻辑。</p>
<h3 id="流程图"><a href="#流程图" class="headerlink" title="流程图"></a>流程图</h3><img src="expose-progress.png" alt="expose-progress.png" />

<h2 id="Product"><a href="#Product" class="headerlink" title="Product"></a>Product</h2><p>github地址： <a href="https://github.com/suiming/PetersLab">suiming/PetersLab (github.com)</a></p>
]]></content>
      <tags>
        <tag>技术方案</tag>
      </tags>
  </entry>
</search>
